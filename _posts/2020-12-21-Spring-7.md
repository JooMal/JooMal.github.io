---
layout: post
title: "Spring Study - 7"
date: 2020-12-21
tags: [spring, backend]
category : [study]
comments: true
---

### 7. AOP

### 목차  
1. <a href="#1">AOP가 필요한 상황</a>  
2. <a href="#2">AOP 적용</a>
3. <a href="#3">다음으로</a>


수강 코스는 <a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/">인프런 스프링 입문 강의</a>를 듣고 있습니다.  

---

<a name="1"></a>
### AOP가 필요한 상황
- 가령 모든 메소드의 호출 시간을 측정하려면?
  - 시간 측정 로직(공통 관심 사항)과 핵심 비즈니스 로직(핵심 관심 사항)이 섞이고, 시간 측정 로직이 바뀌면 모든 로직을 찾아가며 변경해야 한다.  

---

<a name="2"></a>
### AOP 적용
- 원하는 곳에 공통 관심 사항을 적용하기 위해 **AOP(Aspect Oriented Programming)**가 도입된다. => 공통 관심 사항과 핵심 관심 사항을 **분리**한다.
- 가령, 시간 측정 로직은 따로 만들고 각 핵심 비즈니스 로직에 공통으로 적용해주는 것임.
- `@Aspect` 어노테이션을 사용한다.
- `@Around("execution(* hello.hellospring..*(..))")` 을 사용해 hello.hellospring 밑의 모든 클래스가 실행될 때마다 AOP를 적용할 수 있다.
- AOP의 동작은
  1. helloController 실행
  2. 프록시 memberService 실행
    - AOP가 있으면 스프링빈을 등록할 때 프록시를 실제 코드 앞에 세워둔다(?)
  2.1. joinPoint.proceed() 실행
  3. 실제 memberService 실행
    - CGLIB? 복제를 해서 뭔가 코드를 적용한다.

---
<a name="3"></a>
### 총정리
2. 스프링 웹 개발 기초 : 정적컨텐츠, MVC와 템플릿 엔진, API(Json 스타일로 객체를 변환해서 내려주는 기술)
3. 회원 관리 예제
  - 비즈니스 요구사항 정리
  - 회원 도메인과 리포지토리(저장소) 제작
  - 이를 순수 자바 코드로 테스트 케이스 작성해봄
  - 회원 서비스 개발, 테스트
4. 스프링 빈과 의존관계
  - 컨트롤러, 리포지토리 등을 스프링 컨테이너에 올려서 쓰고 컴포넌트 스캔으로 자동 의존관계 설정, 자바 코드로 직접 스프링 빈 등록할 수도 있음.
5. 웹 MVC
6. 스프링 DB 접근 기술
  - H2 데이터베이스 (실습용, 로컬 데이터베이스로 사용)
  - 순수 JDBC로 코딩하는 법 (고대 개발자들의 코딩)
  - 스프링 통합 테스트
  - 스프링 JdbcTemplate (사용하면 반복 코드를 확 줄일 수 있었다. sql은 직접 작성)
  - JPA
  - 스프링 데이터 JPA (인터페이스만 작성해서 사용)
7. AOP
  - 메소드 시작과 끝 등에 뭔가를 해야할 때 한 방에 원하는 메소드를 찍어서 사용할 수 있는 기술.

- 이제부터는 각각의 기술을 깊게 이해해야한다. 이제 이론을 공부할 때에도 조금 더 수월할 것.
- 스프링은 너무 거대해서 모든 것을 다 하기는 매우 어렵다. 토비책도 1400, 1500페이지 정도 되는데, 실제 소스코드로 이해하려면 굉장히 오랜 시간이 걸리고 그정도 이해할 필요도 없다. 스프링을 활용해 실무에서 발생하는 문제를 해결하는게 가장 중요하다. 왜 이런 프레임워크가 필요하고, 어떻게 써야하는지 핵심 원리를 찾고, 대략 어디쯤에서 문제가 발생했는지를 알아차리고 찾아볼 수 있는 능력이 중요하다.
- 우아한형제들 입사할 때에는 PHP였는데, 당시 스프링 교육을 영한님께서 진행하셨다고 한다. 스프링을 완전히 마스터할 수 있는 시리즈를 준비 중이며, 실제 실무에서 사용하는 기능 위주로 설명하고 실무에서 사용하지 않는 오래된 기능은 삭제한 강의를 준비중이심.

---

### 단축키
- `Ctrl` + `Alt` + `N` : inline으로 합치기
