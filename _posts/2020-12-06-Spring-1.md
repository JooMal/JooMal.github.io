---
layout: post
title: "Spring Study - 1"
date: 2020-12-06
tags: [spring, backend]
category : [study]
comments: true
---

### 섹션 1 목차  
1. <a href="#1">프로젝트 생성</a>  
2. <a href="#2">라이브러리</a>

수강 코스는 <a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/">인프런 스프링 입문 강의</a>를 듣고 있습니다.  

[진행내역]  
12.06 ~라이브러리 살펴보기 정리

---
<a name="1"></a>
### 프로젝트 생성
Java 11 설치  
IDE: IntelliJ 설치 (실무에서는 주로 인텔리제이를 쓰기 때문에, 이클립스보단 커뮤니티 버전이더라도 인텔리제이를 사용하길 권장하심. 인텔리제이가 단축키 등도 훨씬 편하다고 하심)  
main > java가 있고, test는 test 관련된 소스들이 들어간다. test code는 최근 개발 트렌드에서 굉장히 중요하기 때문에, 거의 모든 기본 셋팅으로 들어가있다.  
build.gradle을 보면 개발자 친화적인 스프링부트가 나오면서, 설정파일까지 다 제공이 된다. gradle에 대한건 지금은 깊게 공부하지 않아도 괜찮다. gradle이 버전 설정하고 라이브러리를 땡겨온다 정도까지만 알면 된다.  
sourceCampatibility = '11'은 Java 11버전과 맞음을 의미함.  
dependencies 보면, 타임리프thymeleaf와 starter-web, 그리고 junit5라는 라이브러리가 기본적으로 들어간다. 이런 라이브러리는 repositories의 mavenCentral()에서 다운로드받아오게 된다.  
.gitignore는 깃에 소스파일만 들어가고 build 파일 등은 올라가면 안되기 때문에, 이를 관리를 해준다.  

##### HelloSpringApplication
```java
package hello.hellospring;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class HelloSpringApplication {

	public static void main(String[] args) {
		SpringApplication.run(HelloSpringApplication.class, args);
	}
}

```
메인 메서드를 그냥 실행하면 된다. Tomcat started on port(s):8080이 로그에 떠있는데, 웹 브라우저를 열어서 localhost:8080으로 들어가면 에러페이지가 뜬다. 내장된 Tomcat 웹서버를 자체적으로 띄우면서 스프링부트도 같이 올라가게 되는 것이다.  
인텔리제이를 쓰다보면 그레이들이 직접 실행되어 느릴 때가 있는데, Preference > Build Tools에서 Build and run using과 Run tests using을 인텔리제이로 바꿔주면 됨.  

---
<a name="2"></a>
### 라이브러리
build.grade을 열어보면, 최초에 선택한 라이브러리는 타임리프(html 만들어주는 템플릿 엔진), 스타터웹, 자동으로 들어오는 스타터테스트밖에 없다. External Libraries를 들어가보면, 땡겨온 라이브러리가 알고보면 굉장히 많음. junit관련된 것도 있고, spring-boot와 관련된 것도 굉장히 많다. 직접 땡긴 적이 없는데? 요즘에는 웹 애플리케이션 만들려면 기본적으로 저 라이브러리들은 필요해서, 스프링에서 자동으로 관리를 해준다.  
이미 starter-web을 가져오기 위해 필요했던, 의존하는 라이브러리들을 싹 다 자동으로 스프링에서 가져오는 것임. ~라이브러리를 땡긴다고 표현하는구나.. 신기하다~  
왼쪽 하단 네모두개를 누르면 오른쪽에 Gradle칸이 뜬다. 이걸 눌러보면 Dependencies들을 확인할 수 있다. 끝에 (*)이라고 붙어있는건 표현상 중복을 제외해준 것임.  
강사님의 재미있는 이야기 : 고대의 개발자들은(ㅋㅋㅋ) 웹 서버와 개발 라이브러리가 분리되어 있어서, 톰캣 서버 들어가서 라이브러리를 막 설치하고 했었는데, 이제는 그냥 내장형(임베디드) 웹서버를 갖고 있다. 라이브러리 하나를 빌드해서 웹서버에 올리면 되는 것이다.  
톰캣가보면 embed-core도 확인할 수 있고, 타임리프를 눌러보면 org.thymeleaf 등 관련된 라이브러리들을 갖고 있다. 스프링부트를 눌러보면 autoconfigure, logging, spring-core까지 싹 세팅이 되어서 돌아가는 것을 확인할 수 있다.  
- logging : 현업에서 일하는 분들은 log로 꼭 출력을 해야한다. 로그로 남겨야 심각한 에러만 따로 모아볼 수 있거나, 로그파일들을 관리할 수 있기 때문이다. 강의에서는 system.out.println도 많이 쓰겠다. logging을 들어가보면 slf4j과 logback이 있다. 시대에 따라 트렌드가 바뀌긴 하는데, slf4j는 인터페이스이고, 로그 구현체는 logback을 주로 사용한다. 요즘에는 이 두가지 조합을 많이 쓰니까, 스프링에서도 그냥 두 개를 logging을 땡기면 자동으로 두 라이브러리를 땡겨준다. logging에 관련해서는 slf4j과 logback을 검색해보시면 된다.  

test를 살펴보면, 자바 진영에서는 junit을 주로 쓴다. 최근에 junit5로 넘어가는 추세이다. mockito라던가, assertj라던가가 있는데 이는 test를 편리하게 할 수 있도록 도와주는 라이브러리이고 핵심은 junit이다.  
핵심 라이브러리는, 정리를 해보면 스프링 부트 라이브러리로는 spring-boot-start-web (톰캣, 스프링 웹 MVC), 타임리프 템플릿 엔진(view), 스프링부트스타터(부트+코어+로깅)가 있다.  
테스트 라이브러리는 junit이 기본이고, mockito(목 라이브러리), assertj(테스트 코드 작성을 좀 더 편하게 하도록 도와주는 라이브러리), spring-test(스프링 통합 테스트 지원)rk dlTek.
